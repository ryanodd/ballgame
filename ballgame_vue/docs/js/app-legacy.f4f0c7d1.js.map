{"version":3,"file":"js/app-legacy.f4f0c7d1.js","mappings":"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","sources":["webpack://game/./node_modules/peerjs/dist/ sync","webpack://game/./src/Game/GameService/GameObject/GameObject.ts","webpack://game/./src/Game/GameService/GameObject/GameObjectFactory/Ball.ts","webpack://game/./src/Game/GameService/GameObject/GameObjectFactory/PulsePlayerObject.ts","webpack://game/./src/Game/GameService/GameObject/GameObjectFactory/Wall.ts","webpack://game/./src/Game/InputService/contants/noInputResult.ts","webpack://game/./src/Game/InputService/InputService.ts","webpack://game/./src/Game/GameService/Player/Player.ts","webpack://game/./src/Game/GameService/Player/PlayerTypes/PulsePlayer.ts","webpack://game/./src/Game/GameService/Scene/Scene.ts","webpack://game/./src/Game/GameService/Scene/SceneFactory/Scene1.ts","webpack://game/./src/Game/GameService/netplayjs/myGame.ts","webpack://game/./src/Game/GameService/netplayjs/MyInput.ts","webpack://game/./src/Game/GameService/netplayjs/myRollbackWrapper.ts","webpack://game/./src/Game/InputService/contants/InputConfigDefaults.ts","webpack://game/./src/Game/InputService/model/InputResult.ts","webpack://game/./src/Game/VueService/VueService.ts","webpack://game/./src/lib/netplayjs/defaultinput.ts","webpack://game/./src/lib/netplayjs/ewmasd.ts","webpack://game/./src/lib/netplayjs/game.ts","webpack://game/./src/lib/netplayjs/debugging.ts","webpack://game/./src/lib/netplayjs/netcode/rollback.ts","webpack://game/./src/lib/netplayjs/autoserialize.ts","webpack://game/./src/lib/netplayjs/types.ts","webpack://game/./src/lib/netplayjs/utils.ts","webpack://game/./src/Vue/App.vue?edab","webpack://game/./src/Vue/components/MainLayout.vue?1da1","webpack://game/./src/Vue/components/AspectRatioLetterbox.vue?df2c","webpack://game/./node_modules/@vue/vue-loader-v15/lib/index.js","webpack://game/./src/Vue/components/AspectRatioLetterbox.vue?ada8","webpack://game/./src/Vue/components/AspectRatioLetterbox.vue","webpack://game/./src/Vue/components/GameCanvas.vue?1e5f","webpack://game/./src/Vue/components/CanvasOverlay.vue?ce79","webpack://game/./src/Vue/components/HudSection.vue?3aa8","webpack://game/./src/Vue/components/PlayerMeter.vue?a0e2","webpack://game/./src/Vue/components/PlayerMeter.vue?1005","webpack://game/./src/Vue/components/PlayerMeter.vue","webpack://game/./src/Vue/components/HudSection.vue?5328","webpack://game/./src/Vue/components/HudSection.vue","webpack://game/./src/Vue/components/CanvasOverlay.vue?b58c","webpack://game/./src/Vue/components/CanvasOverlay.vue","webpack://game/./src/Vue/components/GameCanvas.vue?fbab","webpack://game/./src/Vue/components/GameCanvas.vue","webpack://game/./src/Vue/components/NetplayMenu.vue?9b02","webpack://game/./src/Vue/components/CardBox.vue?f00b","webpack://game/./src/Vue/components/CardBox.vue?4c2e","webpack://game/./src/Vue/components/CardBox.vue","webpack://game/./src/Vue/components/NetplayMenu.vue?f469","webpack://game/./src/Vue/components/NetplayMenu.vue","webpack://game/./src/Vue/components/NetplayStats.vue?389e","webpack://game/./src/Vue/components/NetplayStats.vue?ed24","webpack://game/./src/Vue/components/NetplayStats.vue","webpack://game/./src/Vue/components/MainLayout.vue?76aa","webpack://game/./src/Vue/components/MainLayout.vue","webpack://game/./src/Vue/App.vue?2e40","webpack://game/./src/Vue/App.vue","webpack://game/./src/main.ts","webpack://game/webpack/bootstrap","webpack://game/webpack/runtime/async module","webpack://game/webpack/runtime/chunk loaded","webpack://game/webpack/runtime/compat get default export","webpack://game/webpack/runtime/define property getters","webpack://game/webpack/runtime/global","webpack://game/webpack/runtime/harmony module decorator","webpack://game/webpack/runtime/hasOwnProperty shorthand","webpack://game/webpack/runtime/make namespace object","webpack://game/webpack/runtime/wasm loading","webpack://game/webpack/runtime/publicPath","webpack://game/webpack/runtime/jsonp chunk loading","webpack://game/webpack/startup"],"sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = 5784;\nmodule.exports = webpackEmptyContext;","import { b2Body } from \"@/lib/Box2D/Box2D\";\nimport { Scene } from \"../Scene/Scene\";\n\n// This is used in place of 'any' for arbitrary data we want to attach to a b2 body.\n// The arbitrary data is needed because collisions trigger callbacks only with access to this arbitrary data.\nexport interface BodyUserData {\n  gameObject: GameObject;\n}\n\nexport interface GameObjectProps {\n  scene: Scene;\n\n  x: number;\n  y: number;\n} \n\nexport default abstract class GameObject {\n  abstract scene: Scene;\n  abstract body: b2Body; // Should all objects have bodies? Can use sensor-bodies if no collisions wanted. But still unnecessary a lot of the time.\n  markedForDeletion = false;\n\n  abstract render(canvas: HTMLCanvasElement): void;\n  tick(){\n    0; // so the compiler doesn't complain.\n  }\n}\n","import { b2Body, b2BodyDef, b2BodyType, b2CircleShape, b2FixtureDef, b2Vec2, b2World } from \"@/lib/Box2D/Box2D\";\nimport { Collider, ColliderDesc, ColliderHandle, RigidBody, RigidBodyDesc } from \"@dimforge/rapier2d\";\nimport { Scene } from \"../../Scene/Scene\";\nimport GameObject, { BodyUserData, GameObjectProps } from \"../GameObject\";\n\nexport interface BallProps extends GameObjectProps {\n  r: number;\n}\n\nexport default class Ball extends GameObject {\n  scene: Scene;\n  colliderHandle: ColliderHandle;\n  body: b2Body;\n  \n  constructor(props: BallProps){\n    super();\n    this.scene = props.scene;\n    this.colliderHandle = this.createCollider(props);\n  }\n\n  createCollider(props: BallProps){\n    const rigidBodyDesc = RigidBodyDesc.dynamic();\n    const rigidBody = this.scene.world.createRigidBody(rigidBodyDesc);\n\n    // Create a cuboid collider attached to the dynamic rigidBody.\n    const colliderDesc = ColliderDesc.ball(props.r).setTranslation(props.x + props.r, props.y + props.r);\n    const returnCollider = this.scene.world.createCollider(colliderDesc, rigidBody.handle).handle;\n    \n    return returnCollider;\n  }\n\n  // No tick\n\n  render(canvas: HTMLCanvasElement){\n    const c = canvas.getContext('2d');\n    c.fillStyle = 'rgb(200, 0, 0)';\n\n    const collider = this.scene.world.getCollider(this.colliderHandle)\n    const { x: xPosition, y: yPosition} = collider.translation(); \n    const radius = collider.radius()\n    \n    c.beginPath();\n    c.arc(xPosition, yPosition, radius, 0, Math.PI * 2, true); // Outer circle\n    c.fill();\n  }\n}\n","import { LogService } from \"@/Game/LogService/LogService\";\nimport { b2Body, b2BodyDef, b2BodyType, b2CircleShape, b2Fixture, b2FixtureDef, b2Vec2, b2World } from \"@/lib/Box2D/Box2D\";\nimport { Scene } from \"../../Scene/Scene\";\nimport GameObject, { BodyUserData, GameObjectProps } from \"../GameObject\";\nimport Bezier from \"bezierjs\"\nimport { ColliderDesc, ColliderHandle, RigidBodyDesc, Vector } from \"@dimforge/rapier2d\";\n\nexport interface PulsePlayerProps extends GameObjectProps {\n  r: number;\n  // density: number;\n  // friction: number;\n  // restitution: number;\n}\n\nexport default class PulsePlayerObject extends GameObject { // extend something general?\n  scene: Scene;\n  colliderHandle: ColliderHandle;\n  body: b2Body;\n  \n  constructor(props: PulsePlayerProps){\n    super();\n    this.scene = props.scene;\n    this.colliderHandle = this.createCollider(props);\n  }\n\n  createCollider(props: PulsePlayerProps){\n    const rigidBodyDesc = RigidBodyDesc.dynamic();\n    const rigidBody = this.scene.world.createRigidBody(rigidBodyDesc);\n\n    // Create a cuboid collider attached to the dynamic rigidBody.\n    const colliderDesc = ColliderDesc.ball(props.r).setTranslation(props.x + props.r, props.y + props.r);\n    const returnCollider = this.scene.world.createCollider(colliderDesc, rigidBody.handle).handle;\n    \n    return returnCollider;\n  }\n\n  // No tick\n\n  handleMovement(xAxisInput: number, yAxisInput: number){\n    const ACCELERATION_CONSTANT_X = 3;\n    const ACCELERATION_CONSTANT_Y = 3;\n\n    const collider = this.scene.world.getCollider(this.colliderHandle)\n    const rigidBody = this.scene.world.getRigidBody(collider.parent())\n    const velocity = rigidBody.linvel()\n\n    let xInputForce = xAxisInput * ACCELERATION_CONSTANT_X;\n    let yInputForce = yAxisInput * ACCELERATION_CONSTANT_Y;\n\n    // top speed & quick turnaround\n    // Makes force which tends velocity toward orignal input force AT SOME RATE. Is instant? Or does it take a few frames to turn around?\n    // I call this strategy \"VELOCITY CANCELLING\": input/target velocity minus current velocity.\n    xInputForce -= velocity.x\n    yInputForce -= velocity.y\n\n        // Don't know how to scalar multiply yet\n    const impulseX = rigidBody.mass() * xInputForce; //disregard time factor. < ??what does this mean?\n    const impulseY = rigidBody.mass() * yInputForce;\n    const impulse = { x: impulseX, y: impulseY };\n    \n    rigidBody.applyImpulse(impulse, true)\n\n    // // Example of slow turning I think?\n    // //case MS_LEFT:  desiredVel = b2Max( vel.x - 0.1f, -5.0f ); break;\n    // //case MS_STOP:  desiredVel = 0; break;\n    // //case MS_RIGHT: desiredVel = b2Min( vel.x + 0.1f,  5.0f ); break;\n  }\n\n  pulse(){\n    const pulseRadiusBez = new Bezier(0,0, 0,0, 0,0, 0,0);\n  }\n\n  render(canvas: HTMLCanvasElement){\n    const c = canvas.getContext('2d');\n    c.fillStyle = 'rgb(126, 226, 151)';\n\n    const collider = this.scene.world.getCollider(this.colliderHandle)\n    const { x: xPosition, y: yPosition} = collider.translation(); \n    const radius = collider.radius()\n\n    c.beginPath();\n    c.arc(xPosition, yPosition, radius, 0, Math.PI * 2, true); // Outer circle\n    c.fill();\n  }\n}\n","import { LogService } from \"@/Game/LogService/LogService\";\nimport { b2Body, b2BodyDef, b2BodyType, b2FixtureDef, b2PolygonShape, b2Vec2, b2World } from \"@/lib/Box2D/Box2D\";\nimport { Collider, ColliderDesc, ColliderHandle } from \"@dimforge/rapier2d\";\nimport { Scene } from \"../../Scene/Scene\";\nimport GameObject, { BodyUserData, GameObjectProps } from \"../GameObject\";\n\nexport interface WallProps extends GameObjectProps {\n  w: number;\n  h: number;\n  rotation?: number;\n}\n\n// At this moment this component is translating from corner origins to center origin for rapier\n// still unsure what rapier is using so i;ll just try this out \nexport default class Wall extends GameObject { // extend something general?\n  scene: Scene;\n  colliderHandle: ColliderHandle;\n  body: b2Body;\n  \n  constructor(props: WallProps) {\n    super();\n    this.scene = props.scene;\n    this.colliderHandle = this.createCollider(props);\n  }\n\n  createCollider(props: WallProps){\n    const groundColliderDesc = ColliderDesc.cuboid(props.w / 2, props.h / 2)\n      .setTranslation(props.x + (props.w / 2), props.y + (props.h / 2))\n      .setRotation((props.rotation ?? 0)*Math.PI/180)\n    const returnColliderHandle = this.scene.world.createCollider(groundColliderDesc).handle;\n    return returnColliderHandle;\n  }\n\n  // No tick\n\n  render(canvas: HTMLCanvasElement){\n    const c = canvas.getContext('2d');\n    c.fillStyle = 'rgb(209, 225, 235)';\n\n    console.log(this.colliderHandle)\n    const collider = this.scene.world.getCollider(this.colliderHandle)\n    const { x: halfX, y: halfY } = collider.halfExtents()\n    const { x: xPosition, y: yPosition} = collider.translation();\n    const rotation = collider.rotation()\n\n    console.log(`colliderHandle: ${collider.handle}, halfX: ${halfX}, halfY: ${halfY}, xPosition: ${xPosition}, yPosition: ${yPosition}`)\n\n    c.rect( xPosition - halfX, yPosition - halfY, halfX*2, halfY*2);\n    c.fill();\n  }\n}\n","import { GamepadInputResult, KeyboardMouseInputResult } from \"../model/InputResult\";\n\nexport const gamepadNoInputResult: GamepadInputResult = {\n  button1: false,\n  button2: false,\n  button3: false,\n  button4: false,\n\n  leftStickXAxis: 0,\n  leftStickYAxis: 0,\n  rightStickXAxis: 0,\n  rightStickYAxis: 0,\n\n  leftTriggerAxis: 0,\n  rightTriggerAxis: 0,\n}\n\nexport const keyboardMouseNoInputResult: KeyboardMouseInputResult = {\n  button1: false,\n  button2: false,\n  button3: false,\n  button4: false,\n  \n  buttonUp: false,\n  buttonRight: false,\n  buttonDown: false,\n  buttonLeft: false,\n}\n","import { InputConfig } from './model/InputConfig';\nimport { GamepadInputResult, KeyboardMouseInputResult } from './model/InputResult';\nimport { gamepadNoInputResult, keyboardMouseNoInputResult } from './contants/noInputResult';\nimport { MyInput } from '../GameService/netplayjs/MyInput';\n\n// Applies config to raw input data to produce gameplay-usable inputs.\n// TODO maybe? use this at the netplay-js layer (instead of Player layer) so simpler input is serialized\n\nexport class InputServiceImplementation {\n  constructor() {\n    0;\n  }\n\n  getGamepadInput(input: MyInput, gamepadIndex: number, config: InputConfig): GamepadInputResult {\n    const gamepad: Gamepad = input.gamepads[gamepadIndex];\n    if (!gamepad) return gamepadNoInputResult;\n\n    const mapping = config.gamepadInputMapping;\n    \n    const leftStickMagnitude = Math.sqrt(Math.pow(Math.abs(gamepad.axes[mapping.leftStickXAxisIndex]), 2) + Math.pow(Math.abs(gamepad.axes[mapping.leftStickYAxisIndex]), 2));\n    const rightStickMagnitude = Math.sqrt(Math.pow(Math.abs(gamepad.axes[mapping.rightStickXAxisIndex]), 2) + Math.pow(Math.abs(gamepad.axes[mapping.rightStickYAxisIndex]), 2));\n\n    const isLeftStickDeadzoned = leftStickMagnitude < config.leftStickDeadzone;\n    const isRightStickDeadzoned = rightStickMagnitude < config.rightStickDeadzone;\n\n    const detectedInput: GamepadInputResult = {\n      button1: gamepad.buttons[mapping.button1Index].pressed,\n      button2: gamepad.buttons[mapping.button2Index].pressed,\n      button3: gamepad.buttons[mapping.button3Index].pressed,\n      button4: gamepad.buttons[mapping.button4Index].pressed,\n    \n      leftStickXAxis: isLeftStickDeadzoned ? 0 : gamepad.axes[mapping.leftStickXAxisIndex],\n      leftStickYAxis: isLeftStickDeadzoned ? 0 : -gamepad.axes[mapping.leftStickYAxisIndex],\n      rightStickXAxis: isRightStickDeadzoned ? 0 : gamepad.axes[mapping.rightStickXAxisIndex],\n      rightStickYAxis: isRightStickDeadzoned ? 0 : -gamepad.axes[mapping.rightStickYAxisIndex],\n    \n      // Support button style trigger?\n      leftTriggerAxis: gamepad.axes[mapping.leftTriggerAxisIndex],\n      rightTriggerAxis: gamepad.axes[mapping.rightTriggerAxisIndex],\n    }\n    return detectedInput;\n  }\n\n  getKeyboardMouseInput(input: MyInput, config: InputConfig): KeyboardMouseInputResult {\n    const mapping = config.keyboardMouseInputMapping;\n\n    const detectedInput: KeyboardMouseInputResult = {\n      button1: !!input.pressed[mapping.button1Key],\n      button2: !!input.pressed[mapping.button2Key],\n      button3: !!input.pressed[mapping.button3Key],\n      button4: !!input.pressed[mapping.button4Key],\n    \n      buttonUp: !!input.pressed[mapping.buttonUpKey],\n      buttonRight: !!input.pressed[mapping.buttonRightKey],\n      buttonDown: !!input.pressed[mapping.buttonDownKey],\n      buttonLeft: !!input.pressed[mapping.buttonLeftKey]\n    }\n\n    return detectedInput\n  }\n}\n\nexport const InputService = new InputServiceImplementation();\n","import { defaultInputConfig } from \"@/Game/InputService/contants/InputConfigDefaults\";\nimport { InputService } from \"@/Game/InputService/InputService\";\nimport { InputConfig } from \"@/Game/InputService/model/InputConfig\";\nimport { GamepadInputResult, KeyboardMouseInputResult } from \"@/Game/InputService/model/InputResult\";\nimport { VueService } from \"@/Game/VueService/VueService\";\nimport { NetplayPlayer } from \"@/lib/netplayjs\";\nimport { MyInput } from \"../netplayjs/MyInput\";\nimport { Scene } from \"../Scene/Scene\";\n\nexport interface PlayerProps {\n  playerIndex: number;\n  netplayPlayerIndex: number;\n  gamepadIndex: number;\n  inputConfig?: InputConfig;\n}\n\n// A Player is everything that needs to be stored/done per-player.\nexport abstract class Player {\n  playerIndex: number; // in-game player e.g. \"Player 1\"\n  netplayPlayerIndex: number; // client index\n  gamepadIndex?: number; // index in the browser's 'GamePad' interface\n  inputConfig?: InputConfig;\n  resourceMeter: number;\n  \n  // 101 for rounding issues. I want fractional costs like 1/3 which is 33.33\n  // So we'll use 101 and round down for displaying.\n  // This is a character-wide rule for now.\n  RESOURCE_METER_MAXIMUM = 101;\n  RESOURCE_METER_BEGIN = 50;\n  \n\n  constructor(props: PlayerProps){\n    this.playerIndex = props.playerIndex;\n    this.netplayPlayerIndex = props.netplayPlayerIndex;\n    this.gamepadIndex = props.gamepadIndex;\n    this.inputConfig = props.inputConfig;\n    this.resourceMeter = this.RESOURCE_METER_BEGIN;\n  }\n\n  abstract createObjects(scene: Scene, x: number, y: number);\n  // Detect input, do stuff\n  abstract tick(input: MyInput);\n\n  getInput(input: MyInput): GamepadInputResult | KeyboardMouseInputResult{\n    if (this.gamepadIndex === -1) {\n      return InputService.getKeyboardMouseInput(input, this.inputConfig ?? defaultInputConfig)\n    } \n    return InputService.getGamepadInput(input, this.gamepadIndex, this.inputConfig ?? defaultInputConfig); \n  }\n\n  setResourceMeter(value: number){\n    const newValue = Math.min(value, this.RESOURCE_METER_MAXIMUM);\n    this.resourceMeter = newValue;\n    VueService.setPlayerResourceMeter(this.playerIndex, newValue); // the frontend service plants its dirty fingers everywhere\n  }\n}\n","import { GamepadInputResult, isGamePadInputResult, KeyboardMouseInputResult } from \"@/Game/InputService/model/InputResult\";\nimport PulsePlayerObject from \"../../GameObject/GameObjectFactory/PulsePlayerObject\";\nimport { MyInput } from \"../../netplayjs/MyInput\";\nimport { Scene } from \"../../Scene/Scene\";\nimport { Player, PlayerProps } from \"../Player\";\n\nexport interface PulsePlayerProps extends PlayerProps {\n  // DENSITY: number;\n  // FRICTION: number;\n  // RESTITUTION: number;\n  RADIUS: number;\n}\n\nexport class PulsePlayer extends Player {\n  // DENSITY: number;\n  // FRICTION: number;\n  // RESTITUTION: number;\n  RADIUS: number;\n\n  pulseObject: PulsePlayerObject | undefined;\n\n  constructor(props: PulsePlayerProps){\n    super({\n      playerIndex: props.playerIndex,\n      netplayPlayerIndex: props.netplayPlayerIndex,\n      gamepadIndex: props.gamepadIndex\n    });\n    // this.DENSITY = props.DENSITY;\n    // this.FRICTION = props.FRICTION;\n    // this.RESTITUTION = props.RESTITUTION;\n    this.RADIUS = props.RADIUS;\n\n    this.pulseObject = undefined;\n  }\n\n  // Puts new player Game Objects (usually a single object) into the given Scene world.\n  createObjects(scene: Scene, x: number, y: number){\n    this.pulseObject = new PulsePlayerObject({\n      scene: scene,\n      x: x,\n      y: y,\n      r: this.RADIUS,\n      // density: this.DENSITY,\n      // friction: this.FRICTION,\n      // restitution: this.RESTITUTION\n    });\n    scene.addGameObject(this.pulseObject);\n  }\n\n  // Detect input, do stuff\n  tick(input: MyInput){\n    this.handleMovement(this.getInput(input));\n  }\n\n  handleMovement(input: GamepadInputResult | KeyboardMouseInputResult){\n    let xAxisInput = 0\n    let yAxisInput = 0\n\n    if (isGamePadInputResult(input)) {\n      xAxisInput = input.leftStickXAxis;\n      yAxisInput = input.leftStickYAxis;\n    }\n    else {\n      console.log(input.buttonUp)\n      if (input.buttonLeft) xAxisInput -= 1\n      if (input.buttonRight) xAxisInput += 1\n      if (input.buttonUp) yAxisInput += 1\n      if (input.buttonDown) yAxisInput -= 1\n    }\n    \n    this.pulseObject.handleMovement(xAxisInput, yAxisInput);\n  }\n}\n","import GameObject from \"../GameObject/GameObject\";\nimport { World } from '@dimforge/rapier2d'\n\nexport interface SceneProps {\n  world: World;\n  unitWidth: number;\n  unitHeight: number;\n  gameObjects: GameObject[];\n}\n\nexport class Scene {\n  world: World;\n  unitWidth: number;\n  unitHeight: number;\n  gameObjects: GameObject[];\n\n  constructor(props: SceneProps){\n    this.world = props.world;\n    this.unitWidth = props.unitWidth;\n    this.unitHeight = props.unitHeight;\n    this.gameObjects = props.gameObjects;\n\n    this.setup();\n  }\n\n  setup() {\n    //nothin yet\n  }\n\n  render(canvas: HTMLCanvasElement) {\n    // Set rendering size to actual pixel size (to render at the best possible resolution)\n    const canvasElementWidth = canvas.getBoundingClientRect().width\n    const canvasElementHeight = canvas.getBoundingClientRect().height\n    canvas.width = canvasElementWidth;\n    canvas.height = canvasElementHeight;\n\n    // flip canvas y-axis: to make box2d & canvas coordinate systems match y-direction (bottom-up)\n    canvas.getContext('2d').transform(1, 0, 0, -1, 0, canvas.height)\n\n    // Scale so that we can use our own units when drawing with coordinates\n    const xScaling = canvas.width / this.unitWidth;\n    const yScaling = canvas.height / this.unitHeight;\n    const squareScaling = Math.min(xScaling, yScaling);\n    canvas.getContext('2d').scale(squareScaling, squareScaling);\n\n    this.renderBackground(canvas)\n    this.renderGameObjects(canvas)\n  }\n\n  addGameObject(newObject: GameObject){\n    this.gameObjects.push(newObject);\n  }\n  \n  private renderGameObjects(canvas: HTMLCanvasElement) {\n    console.log(this.gameObjects)\n    this.gameObjects.forEach(gameObject => {      \n      gameObject.render(canvas)\n    })\n  }\n\n  private renderBackground(canvas: HTMLCanvasElement) {\n    const c = canvas.getContext('2d');\n    c.fillStyle = 'rgb(42, 43, 49)';\n    c.fillRect(0, 0, canvas.width, canvas.height);\n  }\n}\n","import { LogService } from \"@/Game/LogService/LogService\";\nimport { b2Vec2, b2World } from \"@/lib/Box2D/Box2D\";\nimport { World } from \"@dimforge/rapier2d\";\nimport Ball from \"../../GameObject/GameObjectFactory/Ball\";\nimport Wall from \"../../GameObject/GameObjectFactory/Wall\";\nimport { Player } from \"../../Player/Player\";\nimport { Scene } from \"../Scene\";\n\nconst SCENE_WIDTH = 16;\nconst SCENE_HEIGHT = 9;\n\nconst UI_HEIGHT = 1; // UI section on top 1/9th of game screen\nconst NON_UI_HEIGHT = SCENE_HEIGHT - UI_HEIGHT;\n\nconst ARENA_WIDTH = 15;\nconst ARENA_HEIGHT = 7.8;\n\nconst ARENA_HORIZONTAL_PADDING = (SCENE_WIDTH - ARENA_WIDTH) / 2;\nconst ARENA_VERTICAL_PADDING = (NON_UI_HEIGHT - ARENA_HEIGHT) / 2;\n\nconst WALL_THICKNESS = 0.1;\n\nexport interface Scene1Props {\n  players: Player[];\n}\n\n\nexport function createScene1(props: Scene1Props): Scene {\n  const gravity = { x: 0.0, y: 0.0 };\n  const world = new World(gravity)\n  \n  const returnScene: Scene = new Scene({\n    world: world,\n    unitWidth: SCENE_WIDTH,\n    unitHeight: SCENE_HEIGHT,\n    gameObjects: []\n  });\n\n  const player1: Player | undefined = props.players[0];\n  if (player1){\n    player1.createObjects(returnScene, 4, 4);\n  }\n  const player2: Player | undefined = props.players[1];\n  if (player2){\n    player2.createObjects(returnScene, 8, 4);\n  }\n  console.log(player2)\n\n  returnScene.addGameObject(new Ball({\n    scene: returnScene,\n    x: 8,\n    y: 7,\n    r: 0.50\n  }));\n\n  // Top Wall\n  returnScene.addGameObject(new Wall({\n    scene: returnScene,\n    x: ARENA_HORIZONTAL_PADDING,\n    y: ARENA_VERTICAL_PADDING + ARENA_HEIGHT,\n    w: ARENA_WIDTH,\n    h: WALL_THICKNESS,\n  }));\n\n  // Right Wall\n  returnScene.addGameObject(new Wall({\n    scene: returnScene,\n    x: ARENA_HORIZONTAL_PADDING + ARENA_WIDTH,\n    y: ARENA_VERTICAL_PADDING,\n    w: WALL_THICKNESS,\n    h: ARENA_HEIGHT,\n  }));\n\n  // Bottom Wall\n  returnScene.addGameObject(new Wall({\n    scene: returnScene,\n    x: ARENA_HORIZONTAL_PADDING,\n    y: ARENA_VERTICAL_PADDING,\n    w: ARENA_WIDTH,\n    h: WALL_THICKNESS,\n  }));\n\n  // Left Wall\n  returnScene.addGameObject(new Wall({\n    scene: returnScene,\n    x: ARENA_HORIZONTAL_PADDING,\n    y: ARENA_VERTICAL_PADDING,\n    w: WALL_THICKNESS,\n    h: ARENA_HEIGHT,\n  }));\n\n  return returnScene;\n}\n","import { VueService, VueServicePlayer } from '@/Game/VueService/VueService';\nimport { NetplayPlayer, DefaultInput, Game, JSONValue } from '@/lib/netplayjs'\nimport { Player } from '../Player/Player';\nimport { Scene } from '../Scene/Scene';\nimport { createScene1 } from '../Scene/SceneFactory/Scene1';\nimport { MyInput } from './MyInput';\nimport { MyRollbackWrapper } from './myRollbackWrapper';\nimport { World } from '@dimforge/rapier2d';\nimport { PulsePlayer } from '../Player/PlayerTypes/PulsePlayer';\nimport { defaultInputConfig } from '@/Game/InputService/contants/InputConfigDefaults';\n\nexport class MyGame extends Game {\n  static timestep = 1000 / 60;\n\n  // These are needed in the Game class but I want to override the behaviour that uses it.\n  // The canvas should be 100% and 100%, not px width/height\n  static canvasSize = { width: -1, height: -1 };\n\n  players = [\n    new PulsePlayer({\n      playerIndex: 0,\n      netplayPlayerIndex: 0, // host\n      gamepadIndex: -1, // -1 is Keyboard/Mouse\n\n      RADIUS: 0.240,\n      // DENSITY: 0.5,\n      // FRICTION: 0.5,\n      // RESTITUTION: 0.0\n    }),\n    new PulsePlayer({\n      playerIndex: 1,\n      netplayPlayerIndex: 1, // client\n      gamepadIndex: -1, // -1 is Keyboard/Mouse\n      inputConfig: {\n        keyboardMouseInputMapping: {\n          buttonUpKey: \"W\",\n          buttonRightKey: \"D\",\n          buttonDownKey: \"S\",\n          buttonLeftKey: \"A\",\n          ...defaultInputConfig.keyboardMouseInputMapping\n        },\n        ...defaultInputConfig\n      },\n\n      RADIUS: 0.240,\n      // DENSITY: 0.5,\n      // FRICTION: 0.5,\n      // RESTITUTION: 0.0\n    }),\n  ]\n\n  scene: Scene = createScene1({ players: this.players });\n  previousTimestamp = 0\n\n  someTestCopyOfThis = null\n\n  serialize(): JSONValue {\n    return {\n      snapshot: this.scene.world.takeSnapshot().toString()\n    } as JSONValue;\n  }\n\n  deserialize(value: JSONValue): void {\n    const snapshot = value['snapshot']\n    const splitSnapshot = snapshot.split(',')\n    const array = new Uint8Array(splitSnapshot)\n    this.scene.world = World.restoreSnapshot(array);\n  }\n\n  tick(playerInputs: Map<NetplayPlayer, MyInput>) {\n    this.tickWorld();\n    this.tickPlayers(playerInputs)\n\n    this.scene.world.colliders.forEachCollider((collider) => {\n      console.log(`x: ${collider.translation().x}, y: ${collider.translation().y}, hw: ${collider.halfExtents().x}, hh: ${collider.halfExtents().y}`)\n    })\n  }\n\n  draw(canvas: HTMLCanvasElement) {\n    this.scene.render(canvas)\n  }\n\n  // Tick Players: Input handling, mostly\n  tickPlayers(playerInputs: Map<NetplayPlayer, MyInput>){\n    this.players.forEach(player => {\n      for (const [netplayPlayer, input] of playerInputs.entries()) {\n        if (netplayPlayer.getID() === player.netplayPlayerIndex) {\n          player.tick(input); // passes the inputs for a single CLIENT (multiple gamepads still possible) \n        }\n      }\n    })\n  }\n\n  // Physics tick\n  tickWorld() {\n    this.scene.world.step();\n  }\n}\n\nnew MyRollbackWrapper(MyGame).start();\n","import { DefaultInput, DefaultInputReader } from '@/lib/netplayjs'\nimport * as utils from '@/lib/netplayjs/utils'\n\nexport class MyInput extends DefaultInput {\n  gamepads: Gamepad[] = []\n}\n\nexport class MyInputReader extends DefaultInputReader {\n\n  getInput(): MyInput {\n    const input = new MyInput();\n\n    // Stolen from super\n    for (const key in this.PRESSED_KEYS) {\n      if (this.PRESSED_KEYS[key]) input.pressed[key] = true;\n    }\n    // if (this.mousePosition)\n    //   input.mousePosition = utils.clone(this.mousePosition);\n    // input.touches = utils.clone(this.touches);\n    // for (const [name, control] of Object.entries(this.touchControls)) {\n    //   input.touchControls = input.touchControls || {};\n    //   input.touchControls[name] = utils.clone(control.getValue());\n    // }\n\n    // New Stuff\n    // Theory: are the gamepad inputs being serialized as part of the gamestate?\n    // ^ would their serialization cause any problems?\n    input.gamepads = navigator.getGamepads()\n    console.log(input.pressed)\n    return input;\n  }\n}\n","import Peer from 'peerjs'\nimport { DefaultInput } from '@/lib/netplayjs/defaultinput'\nimport EWMASD from '@/lib/netplayjs/ewmasd'\nimport { NetplayPlayer } from '@/lib/netplayjs/types'\n\nimport { Game, GameClass } from '@/lib/netplayjs/game'\nimport { RollbackNetcode } from '@/lib/netplayjs/netcode/rollback'\nimport { MyInputReader } from './MyInput'\n\nimport * as query from \"query-string\";\nimport { assert } from \"chai\";\nimport { VueService } from '@/Game/VueService/VueService'\n\nconst PING_INTERVAL = 100;\n\nexport class MyRollbackWrapper {\n\n  // The class (not the instance) of the input serializable game (myGame)\n  gameClass: GameClass;\n\n  /** The canvas that the game will be rendered onto. */\n  canvas: HTMLCanvasElement;\n\n  vueService: typeof VueService = VueService;\n\n  inputReader: MyInputReader;\n\n  stateSyncPeriod: number;\n\n  pingMeasure: EWMASD = new EWMASD(0.2); // Ryan: I don't know what this 0.2 does\n\n  // The actual instance of the input serializable game class \n  game?: Game;\n\n  rollbackNetcode?: RollbackNetcode<Game, DefaultInput>;\n\n  isChannelOrdered(channel: RTCDataChannel) {\n    return channel.ordered;\n  }\n\n  isChannelReliable(channel: RTCDataChannel) {\n    return (\n      channel.maxPacketLifeTime === null && channel.maxRetransmits === null\n    );\n  }\n\n  checkChannel(channel: RTCDataChannel) {\n    assert.isTrue(\n      this.isChannelOrdered(channel),\n      \"Data Channel must be ordered.\"\n    );\n    assert.isTrue(this.isChannelReliable(channel), \"Channel must be reliable.\");\n  }\n\n  constructor(gameClass: GameClass) {\n    this.gameClass = gameClass;\n\n    this.stateSyncPeriod = this.gameClass.stateSyncPeriod || 1;\n\n    // Find canvas for game.\n    this.canvas = document.getElementById('game-canvas') as HTMLCanvasElement\n\n    if (\n      this.gameClass.touchControls &&\n      window.navigator.userAgent.toLowerCase().includes(\"mobile\")\n    ) {\n      for (const [name, control] of Object.entries(\n        this.gameClass.touchControls\n      )) {\n        control.show();\n      }\n    }\n\n    this.inputReader = new MyInputReader(\n      this.canvas,\n      this.gameClass.pointerLock || false,\n      this.gameClass.touchControls || {}\n    );\n  }\n\n  peer?: Peer;\n\n  start() {\n    console.info(\"Creating a PeerJS instance.\");\n    this.vueService.setNetplayConnectingToServer(true)\n\n    this.peer = new Peer();\n    this.peer.on(\"error\", (err) => {\n      this.vueService.setNetplayErrorMessage(JSON.stringify(err))\n      console.error(err);\n    });\n\n    this.peer!.on(\"open\", (id) => {\n      this.vueService.setNetplayConnectingToServer(false)\n\n      // Try to parse the room from the hash. If we find one,\n      // we are a client.\n      const parsedHash = query.parse(window.location.hash);\n      const isClient = !!parsedHash.room;\n\n      if (isClient) {\n        // We are a client, so connect to the room from the hash.\n        this.vueService.setNetplayConnectedToPeer(true)\n\n        console.info(`Connecting to room ${parsedHash.room}.`);\n\n        const conn = this.peer!.connect(parsedHash.room as string, {\n          serialization: \"json\",\n          reliable: true,\n          // @ts-ignore: This is a hack written by netplayjs to get around a bug in PeerJS\n          _payload: {\n            originator: true,\n            reliable: true,\n          },\n        });\n\n        conn.on(\"error\", (err) => {\n          this.vueService.setNetplayErrorMessage(JSON.stringify(err))\n          console.error(err)\n        });\n\n        // Construct the players array.\n        const players = [\n          new NetplayPlayer(0, false, true), // Player 0 is our peer, the host.\n          new NetplayPlayer(1, true, false), // Player 1 is us, a client\n        ];\n\n        this.startClient(players, conn);\n      } else {\n        // HOST\n        // We are host, so we need to show a join link.\n        console.info(\"Showing join link.\");\n\n        // Show the join link.\n        const joinURL = `${window.location.href}#room=${id}`;\n        this.vueService.setNetplayJoinUrl(joinURL)\n\n        // Construct the players array.\n        const players = [\n          new NetplayPlayer(0, true, true), // Player 0 is us, acting as a host.\n          new NetplayPlayer(1, false, false), // Player 1 is our peer, acting as a client.\n        ];\n\n        // Wait for a connection from a client.\n        this.peer!.on(\"connection\", (conn) => {\n          // Make the menu disappear.\n          this.vueService.setNetplayConnectedToPeer(true)\n          \n          conn.on(\"error\", (err) => {\n            this.vueService.setNetplayErrorMessage(JSON.stringify(err))\n            console.error(err)\n          });\n\n          this.startHost(players, conn);\n        });\n      }\n    });\n  }\n\n  getInitialInputs(\n    players: Array<NetplayPlayer>\n  ): Map<NetplayPlayer, DefaultInput> {\n    const initialInputs: Map<NetplayPlayer, DefaultInput> = new Map();\n    for (const player of players) {\n      initialInputs.set(player, new DefaultInput());\n    }\n    return initialInputs;\n  }\n\n  startHost(players: Array<NetplayPlayer>, conn: Peer.DataConnection) {\n    console.info(\"Starting a rollback host.\");\n\n    this.game = new this.gameClass(this.canvas, players);\n\n    this.rollbackNetcode = new RollbackNetcode(\n      true,\n      this.game!,\n      players,\n      this.getInitialInputs(players),\n      10,\n      this.pingMeasure,\n      this.gameClass.timestep,\n      () => this.inputReader.getInput(),\n      (frame, input) => {\n        conn.send({ type: \"input\", frame: frame, input: input.serialize() });\n      },\n      (frame, state) => {\n        conn.send({ type: \"state\", frame: frame, state: state });\n      }\n    );\n\n    conn.on(\"data\", (data) => {\n      if (data.type === \"input\") {\n        const input = new DefaultInput();\n        input.deserialize(data.input);\n        this.rollbackNetcode!.onRemoteInput(data.frame, players![1], input);\n      } else if (data.type == \"ping-req\") {\n        conn.send({ type: \"ping-resp\", sent_time: data.sent_time });\n      } else if (data.type == \"ping-resp\") {\n        this.pingMeasure.update(Date.now() - data.sent_time);\n      }\n    });\n\n    conn.on(\"open\", () => {\n      console.log(\"Client has connected... Starting game...\");\n      this.checkChannel(conn.dataChannel);\n\n      setInterval(() => {\n        conn.send({ type: \"ping-req\", sent_time: Date.now() });\n      }, PING_INTERVAL);\n\n      this.startGameLoop();\n    });\n  }\n\n  startClient(players: Array<NetplayPlayer>, conn: Peer.DataConnection) {\n    console.info(\"Starting a lockstep client.\");\n\n    this.game = new this.gameClass(this.canvas, players);\n    this.rollbackNetcode = new RollbackNetcode(\n      false,\n      this.game!,\n      players,\n      this.getInitialInputs(players),\n      10,\n      this.pingMeasure,\n      this.gameClass.timestep,\n      () => this.inputReader.getInput(),\n      (frame, input) => {\n        conn.send({ type: \"input\", frame: frame, input: input.serialize() });\n      }\n    );\n\n    conn.on(\"data\", (data) => {\n      if (data.type === \"input\") {\n        const input = new DefaultInput();\n        input.deserialize(data.input);\n        this.rollbackNetcode!.onRemoteInput(data.frame, players![0], input);\n      } else if (data.type === \"state\") {\n        //console.log(data.state)\n        this.rollbackNetcode!.onStateSync(data.frame, data.state);\n      } else if (data.type == \"ping-req\") {\n        conn.send({ type: \"ping-resp\", sent_time: data.sent_time });\n      } else if (data.type == \"ping-resp\") {\n        this.pingMeasure.update(Date.now() - data.sent_time);\n      }\n    });\n    conn.on(\"open\", () => {\n      console.log(\"Successfully connected to server... Starting game...\");\n      this.checkChannel(conn.dataChannel);\n\n      setInterval(() => {\n        conn.send({ type: \"ping-req\", sent_time: Date.now() });\n      }, PING_INTERVAL);\n\n      this.startGameLoop();\n    });\n  }\n\n  startGameLoop() {\n    // Start the netcode game loop.\n    this.rollbackNetcode!.start();\n\n    const animate = (timestamp) => {\n      // Draw state to canvas.\n      this.game!.draw(this.canvas);\n\n      // Update stats\n      this.vueService.setNetplayPing(this.pingMeasure.average().toFixed(2))\n      this.vueService.setNetplayPingStdDev(this.pingMeasure.stddev().toFixed(2))\n      this.vueService.setNetplayHistoryLength(this.rollbackNetcode!.history.length)\n      this.vueService.setNetplayFrame(this.rollbackNetcode!.currentFrame())\n      this.vueService.setNetplayLargestFutureSize(this.rollbackNetcode!.largestFutureSize())\n      this.vueService.setNetplayPredictedFrames(this.rollbackNetcode!.predictedFrames())\n      this.vueService.setNetplayStalling(this.rollbackNetcode!.shouldStall())\n\n      // Request another frame.\n      requestAnimationFrame(animate);\n    };\n    requestAnimationFrame(animate);\n  }\n}\n","import { GamepadInputMapping, InputConfig, KeyboardMouseInputMapping } from \"../model/InputConfig\"\n\nconst defaultXboxOneInputMapping: GamepadInputMapping = {\n  button1Index: 0,\n  button2Index: 1,\n  button3Index: 2,\n  button4Index: 3,\n\n  leftStickXAxisIndex: 0,\n  leftStickYAxisIndex: 1,\n  rightStickXAxisIndex: 2,\n  rightStickYAxisIndex: 3,\n\n  // Support button style trigger?\n  leftTriggerAxisIndex: 4,\n  rightTriggerAxisIndex: 5,\n}\n\nconst defaultKeyboardMouseInputMapping: KeyboardMouseInputMapping = {\n  button1Key: \"Z\",\n  button2Key: \"X\",\n  button3Key: \"C\",\n  button4Key: \"V\",\n  \n  buttonUpKey: \"ArrowUp\",\n  buttonRightKey: \"ArrowRight\",\n  buttonDownKey: \"ArrowDown\",\n  buttonLeftKey: \"ArrowLeft\",\n}\n\nexport const defaultInputConfig: InputConfig = {\n  gamepadInputMapping: defaultXboxOneInputMapping,\n  keyboardMouseInputMapping: defaultKeyboardMouseInputMapping,\n  leftStickDeadzone: 0.15,\n  rightStickDeadzone: 0.15,\n}\n","\nexport const isGamePadInputResult = (input: GamepadInputResult | KeyboardMouseInputResult): input is GamepadInputResult => {\n  return ('leftStickXAxis' in input)\n}\n\nexport interface GamepadInputResult {\n  button1: boolean;\n  button2: boolean;\n  button3: boolean;\n  button4: boolean;\n\n  leftStickXAxis: number; \n  leftStickYAxis: number;\n  rightStickXAxis: number; \n  rightStickYAxis: number;\n\n  // Support button style trigger?\n  leftTriggerAxis: number;\n  rightTriggerAxis: number;\n}\n\nexport interface KeyboardMouseInputResult {\n  button1: boolean;\n  button2: boolean;\n  button3: boolean;\n  button4: boolean;\n  \n  buttonUp: boolean;\n  buttonRight: boolean;\n  buttonDown: boolean;\n  buttonLeft: boolean;\n\n  //mouseXAxis: number;\n  //mouseYAxis: number; \n\n  // TODO mouse clicks? No need yet?\n}\n","import Vue from \"vue\";\n\nexport interface VueServiceConfig {\n  placeholderSetting: string;\n} \n\nexport interface VueServicePlayer {\n  index: number;\n  resourceMeter: number;\n}\n\nexport interface VueServiceState {\n  netplay: {\n    connectingToServer: boolean;\n    connectedToPeer: boolean;\n    joinUrl: string | null;\n    errorMessage: string;\n    ping: string | null;\n    pingStdDev: string | null;\n    historyLength: number | null;\n    frame: number | null;\n    largestFutureSize: number | null;\n    predictedFrames: number | null;\n    stalling: boolean;\n  };\n  playerDict: Record<number, VueServicePlayer>;\n} \n\n// Information interface between the game (TS) and the UI elements (Vue) \nexport class VueServiceImplementation {\n  state: VueServiceState; \n  constructor(config: VueServiceConfig){\n    this.state = {\n      netplay: {\n        connectingToServer: false,\n        connectedToPeer: false,\n        joinUrl: null,\n        errorMessage: null,\n        ping: null,\n        pingStdDev: null,\n        historyLength: null,\n        frame: null,\n        largestFutureSize: null,\n        predictedFrames: null,\n        stalling: false\n      },\n      playerDict: {}\n    };\n  }\n\n  // SET BY GAME\n  ////////////////\n  addPlayer(playerState: VueServicePlayer){\n    Vue.set(this.state.playerDict, playerState.index, playerState);\n  }\n\n  setPlayerResourceMeter(playerIndex: number, value: number){\n    Vue.set(this.state.playerDict[playerIndex], 'resourceMeter', value);\n  }\n\n  setNetplayConnectingToServer(value: boolean){\n    Vue.set(this.state.netplay, 'connectingToServer', value);\n  }\n  setNetplayConnectedToPeer(value: boolean){\n    Vue.set(this.state.netplay, 'connectedToPeer', value);\n  }\n  setNetplayErrorMessage(value: any){\n    Vue.set(this.state.netplay, 'errorMessage', value);\n  }\n  setNetplayJoinUrl(value: any){\n    Vue.set(this.state.netplay, 'joinUrl', value);\n  }\n  setNetplayPing(value: string) {\n    Vue.set(this.state.netplay, 'ping', value);\n  }\n  setNetplayPingStdDev(value: string) {\n    Vue.set(this.state.netplay, 'pingStdDev', value);\n  }\n  setNetplayHistoryLength(value: number) {\n    Vue.set(this.state.netplay, 'historyLength', value);\n  }\n  setNetplayFrame(value: number) {\n    Vue.set(this.state.netplay, 'frame', value);\n  }\n  setNetplayLargestFutureSize(value: number) {\n    Vue.set(this.state.netplay, 'futureSize', value);\n  }\n  setNetplayPredictedFrames(value: number) {\n    Vue.set(this.state.netplay, 'predictedFrames', value);\n  }\n  setNetplayStalling(value: boolean) {\n    Vue.set(this.state.netplay, 'stalling', value);\n  }\n}\n\nexport const VueService = new VueServiceImplementation({placeholderSetting: \"uh ok\"})\n","import { NetplayInput } from \"./types\";\nimport * as utils from \"./utils\";\nimport { TouchControl } from \"./touchcontrols\";\n\nexport class DefaultInput extends NetplayInput<DefaultInput> {\n  pressed: { [key: string]: boolean } = {};\n\n  mousePosition?: { x: number; y: number };\n\n  touches: Array<{ x: number; y: number }> = [];\n\n  touchControls?: { [name: string]: any };\n}\n\nexport class DefaultInputReader {\n  canvas: HTMLCanvasElement;\n\n  PRESSED_KEYS = {};\n\n  mousePosition: { x: number; y: number } | null = null;\n  mouseDelta: { x: number; y: number } | null = null;\n  touches: Array<{ x: number; y: number }> = [];\n\n  touchControls: { [name: string]: TouchControl };\n\n  getCanvasScale(): { x: number; y: number } {\n    const rect = this.canvas.getBoundingClientRect();\n    return {\n      x: this.canvas.width / rect.width,\n      y: this.canvas.height / rect.height,\n    };\n  }\n\n  projectClientPosition(\n    clientX: number,\n    clientY: number\n  ): { x: number; y: number } {\n    const rect = this.canvas.getBoundingClientRect();\n    const scale = this.getCanvasScale();\n\n    return {\n      x: (clientX - rect.left) * scale.x,\n      y: (clientY - rect.top) * scale.y,\n    };\n  }\n\n  constructor(\n    canvas: HTMLCanvasElement,\n    pointerLock: boolean,\n    touchControls: { [name: string]: TouchControl }\n  ) {\n    this.canvas = canvas;\n    this.touchControls = touchControls;\n\n    document.addEventListener(\n      \"keydown\",\n      (event) => {\n        this.PRESSED_KEYS[event.key] = true;\n      },\n      false\n    );\n    document.addEventListener(\n      \"keyup\",\n      (event) => {\n        this.PRESSED_KEYS[event.key] = false;\n      },\n      false\n    );\n\n    canvas.addEventListener(\n      \"mouseenter\",\n      (e) => this.updateMousePosition(e),\n      false\n    );\n\n    canvas.addEventListener(\n      \"mousemove\",\n      (e) => this.updateMousePosition(e),\n      false\n    );\n\n    canvas.addEventListener(\n      \"mouseleave\",\n      (e) => {\n        this.mousePosition = null;\n      },\n      false\n    );\n\n    canvas.addEventListener(\"touchstart\", (e) => this.updateTouches(e), false);\n    canvas.addEventListener(\"touchmove\", (e) => this.updateTouches(e), false);\n    canvas.addEventListener(\"touchend\", (e) => this.updateTouches(e), false);\n\n    canvas.addEventListener(\"mousedown\", () => {\n      if (pointerLock) {\n        canvas.requestPointerLock();\n      }\n    });\n  }\n\n  updateMousePosition(event: MouseEvent) {\n    if (document.pointerLockElement === this.canvas) {\n      if (!this.mousePosition) {\n        // If we are pointer locked, the first position is projected onto the canvas.\n        this.mousePosition = this.projectClientPosition(\n          event.clientX,\n          event.clientY\n        );\n      } else {\n        // Subsequent positions are delta based off of our relative movement.\n        const scale = this.getCanvasScale();\n        this.mousePosition.x += event.movementX * scale.x;\n        this.mousePosition.y += event.movementY * scale.y;\n      }\n    } else {\n      // If we aren't pointer locked, just project the position onto the canvas.\n      this.mousePosition = this.projectClientPosition(\n        event.clientX,\n        event.clientY\n      );\n    }\n  }\n\n  updateTouches(event: TouchEvent) {\n    this.touches.length = event.targetTouches.length;\n    for (let i = 0; i < event.targetTouches.length; ++i) {\n      this.touches[i] = this.projectClientPosition(\n        event.targetTouches[i].clientX,\n        event.targetTouches[i].clientY\n      );\n    }\n  }\n\n  getInput(): DefaultInput {\n    const input = new DefaultInput();\n\n    for (const key in this.PRESSED_KEYS) {\n      if (this.PRESSED_KEYS[key]) input.pressed[key] = true;\n    }\n    if (this.mousePosition)\n      input.mousePosition = utils.clone(this.mousePosition);\n    input.touches = utils.clone(this.touches);\n\n    for (const [name, control] of Object.entries(this.touchControls)) {\n      input.touchControls = input.touchControls || {};\n      input.touchControls[name] = utils.clone(control.getValue());\n    }\n\n    return input;\n  }\n}\n","/**\n * Expontentially weighted moving average and standard deviation.\n * Can be used for measuring values like ping.\n */\nexport default class EWMASD {\n  discount: number;\n\n  est_average: number;\n  est_variance: number;\n\n  initialized: boolean;\n\n  constructor(discount: number) {\n    this.discount = discount;\n\n    this.est_average = 0;\n    this.est_variance = 0;\n\n    this.initialized = false;\n  }\n\n  update(measurement: number) {\n    if (!this.initialized) {\n      this.est_average = measurement;\n      this.initialized = true;\n    } else {\n      const delta = measurement - this.est_average;\n      this.est_variance =\n        (1 - this.discount) *\n        (this.est_variance + this.discount * delta * delta);\n      this.est_average =\n        this.discount * measurement + (1 - this.discount) * this.est_average;\n    }\n  }\n\n  average() {\n    return this.est_average;\n  }\n  variance() {\n    return this.est_variance;\n  }\n  stddev() {\n    return Math.sqrt(this.est_variance);\n  }\n}\n","import { DefaultInput } from \"./defaultinput\";\nimport { NetplayPlayer, NetplayState } from \"./types\";\nimport { TouchControl } from \"./touchcontrols\";\n\nexport type GameClass = {\n  new (canvas: HTMLCanvasElement, players: Array<NetplayPlayer>): Game;\n  timestep: number;\n\n  /**\n   * Canvases need to have a fixed pixel size. This allows us to normalize\n   * mouse position and touches across the network.\n   */\n  canvasSize: { width: number; height: number };\n\n  /**\n   * Whether or not we should lock the pointer when the user clicks on the\n   * canvas. Use this for games like FPSs.\n   */\n  pointerLock?: boolean;\n\n  /**\n   * A list of all the touch controls needed for this game. These will\n   * only be shown on mobile.\n   */\n  touchControls?: { [name: string]: TouchControl };\n\n  /**\n   * How often should the state be synced. By default this happens\n   * every frame. Set to zero to indicate that the state is deterministic\n   * and doesn't need to be synced.\n   */\n  stateSyncPeriod?: number;\n};\n\nexport abstract class Game extends NetplayState<DefaultInput> {\n  abstract draw(canvas: HTMLCanvasElement);\n}\n","export const DEV: boolean = process.env.NODE_ENV === \"development\";\n","import { NetplayInput, NetplayPlayer, NetplayState } from \"../types\";\nimport { get, shift, clone } from \"../utils\";\n\nimport { DEV } from \"../debugging\";\nimport { assert } from \"chai\";\nimport { JSONValue } from \"../json\";\n\nclass RollbackHistory<TInput extends NetplayInput<TInput>> {\n  /**\n   * The frame number that this history entry represents.\n   */\n  frame: number;\n\n  /**\n   * The serialized state of the game at this frame.\n   */\n  state: JSONValue;\n\n  /**\n   * These inputs represent the set of inputs that produced this state\n   * from the previous state.\n   * Eg: history[n].state = history[n - 1].state.tick(history[n].inputs)\n   */\n  inputs: Map<NetplayPlayer, { input: TInput; isPrediction: boolean }>;\n\n  constructor(\n    frame: number,\n    state: JSONValue,\n    inputs: Map<NetplayPlayer, { input: TInput; isPrediction: boolean }>\n  ) {\n    this.frame = frame;\n    this.state = state;\n    this.inputs = inputs;\n  }\n\n  isPlayerInputPredicted(player: NetplayPlayer) {\n    return get(this.inputs, player).isPrediction;\n  }\n\n  anyInputPredicted(): boolean {\n    for (const [player, { isPrediction }] of this.inputs.entries()) {\n      if (isPrediction) return true;\n    }\n    return false;\n  }\n\n  allInputsSynced(): boolean {\n    return !this.anyInputPredicted();\n  }\n}\n\nexport class RollbackNetcode<\n  TState extends NetplayState<TInput>,\n  TInput extends NetplayInput<TInput>\n> {\n  /**\n   * The rollback history buffer.\n   */\n  history: Array<RollbackHistory<TInput>>;\n\n  /**\n   * The max number of frames that we can predict ahead before we have to stall.\n   */\n  maxPredictedFrames: number;\n\n  /**\n   * Inputs from other players that have already arrived, but have not been\n   * applied due to our simulation being behind.\n   */\n  future: Map<NetplayPlayer, Array<{ frame: number; input: TInput }>>;\n\n  highestFrameReceived: Map<NetplayPlayer, number>;\n\n  /**\n   * Whether or not we are the host of this match. The host is responsible for\n   * sending our authoritative state updates.\n   */\n  isHost: boolean;\n\n  onStateSync(frame: number, state: JSONValue) {\n    DEV && assert.isFalse(this.isHost, \"Only clients recieve state syncs.\");\n\n    // Cleanup states that we don't need anymore because we have the definitive\n    // server state. We have to leave at least one state in order to simulate\n    // on the next local tick.\n    let cleanedUpStates = 0;\n    while (this.history.length > 1) {\n      DEV && assert.isTrue(this.history[0].allInputsSynced());\n      if (this.history[0].frame < frame) {\n        shift(this.history);\n        cleanedUpStates++;\n      } else break;\n    }\n    DEV && console.debug(`Cleaned up ${cleanedUpStates} states.`);\n\n    // Update the first state with the definitive server state.\n    DEV && assert.equal(this.history[0].frame, frame);\n    this.history[0].state = state;\n\n    // Rollback to this state.\n    this.state.deserialize(state);\n\n    // Resimulate up to the current point.\n    for (let i = 1; i < this.history.length; ++i) {\n      const currentState = this.history[i];\n\n      this.state.tick(this.getStateInputs(currentState.inputs));\n      currentState.state = clone(this.state.serialize());\n    }\n    DEV &&\n    console.debug(\n        `Resimulated ${this.history.length - 1} states after state sync.`\n      );\n  }\n\n  onRemoteInput(frame: number, player: NetplayPlayer, input: TInput) {\n    DEV &&\n      assert.isTrue(\n        player.isRemotePlayer(),\n        `'player' must be a remote player.`\n      );\n    DEV && assert.isNotEmpty(this.history, `'history' cannot be empty.`);\n\n    const expectedFrame = get(this.highestFrameReceived, player) + 1;\n    DEV && assert.equal(expectedFrame, frame);\n    this.highestFrameReceived.set(player, expectedFrame);\n\n    // If this input is for a frame that we haven't even simulated, we need to\n    // store it in a queue to pull during our next tick.\n    if (frame > this.history[this.history.length - 1].frame) {\n      get(this.future, player).push({ frame: frame, input: input });\n      return; // Skip rest of logic in this function.\n    }\n\n    // If we have already simulated a frame F for which we are currently receiving\n    // an input, it must be the case that frame F is a prediction. This is because,\n    // when we simulated F, we didn't have this input available. Find F.\n    let firstPrediction: number | null = null;\n    for (let i = 0; i < this.history.length; ++i) {\n      if (this.history[i].isPlayerInputPredicted(player)) {\n        firstPrediction = i;\n        break;\n      }\n    }\n    DEV && assert.exists(firstPrediction);\n\n    // Assuming that input messages from a given client are ordered, the\n    // first history with a predicted input for this player is also the\n    // frame for which we just recieved a message.\n    DEV && assert.equal(this.history[firstPrediction!].frame, frame);\n\n    // The state before the first prediction is, by definition,\n    // not a prediction. There must be one such state.\n    const lastActualState = this.history[firstPrediction! - 1];\n\n    // Roll back to that previous state.\n    this.state.deserialize(lastActualState.state);\n\n    // Resimulate forwards with the actual input.\n    for (let i = firstPrediction!; i < this.history.length; ++i) {\n      const currentState = this.history[i];\n      const currentPlayerInput = get(currentState.inputs, player);\n\n      DEV && assert.isTrue(currentPlayerInput.isPrediction);\n\n      if (i === firstPrediction) {\n        DEV && assert.equal(currentState.frame, frame);\n\n        currentPlayerInput.isPrediction = false;\n        currentPlayerInput.input = input;\n      } else {\n        const previousState = this.history[i - 1];\n        const previousPlayerInput = get(previousState.inputs, player);\n\n        currentPlayerInput.input = previousPlayerInput.input.predictNext();\n      }\n\n      this.state.tick(this.getStateInputs(currentState.inputs));\n      currentState.state = clone(this.state.serialize());\n    }\n\n    DEV &&\n    console.debug(\n        `Resimulated ${\n          this.history.length - firstPrediction!\n        } states after rollback.`\n      );\n\n    // If this is the server, then we can cleanup states for which input has been synced.\n    // However, we must maintain the invariant that there is always at least one state\n    // in the history buffer, and that the first entry in the history buffer is a\n    // synced state.\n    if (this.isHost) {\n      let cleanedUpStates = 0;\n      while (this.history.length >= 2) {\n        const firstState = this.history[0];\n        const nextState = this.history[1];\n\n        DEV && assert.isTrue(firstState.allInputsSynced());\n        if (nextState.allInputsSynced()) {\n          const syncedState = shift(this.history);\n          cleanedUpStates++;\n          this.broadcastState!(syncedState.frame, syncedState.state);\n        } else break;\n      }\n      DEV && console.debug(`Cleaned up ${cleanedUpStates} states.`);\n    }\n  }\n\n  broadcastInput: (frame: number, input: TInput) => void;\n  broadcastState?: (frame: number, state: JSONValue) => void;\n\n  pingMeasure: any;\n  timestep: number;\n\n  state: TState;\n  pollInput: () => TInput;\n\n  players: Array<NetplayPlayer>;\n\n  constructor(\n    isHost: boolean,\n    initialState: TState,\n    players: Array<NetplayPlayer>,\n    initialInputs: Map<NetplayPlayer, TInput>,\n    maxPredictedFrames: number,\n    pingMeasure: any,\n    timestep: number,\n    pollInput: () => TInput,\n    broadcastInput: (frame: number, input: TInput) => void,\n    broadcastState?: (frame: number, state: JSONValue) => void\n  ) {\n    this.isHost = isHost;\n    this.state = initialState;\n    this.players = players;\n    this.maxPredictedFrames = maxPredictedFrames;\n    this.broadcastInput = broadcastInput;\n    this.pingMeasure = pingMeasure;\n    this.timestep = timestep;\n    this.pollInput = pollInput;\n\n    if (isHost) {\n      if (broadcastState) {\n        this.broadcastState = broadcastState;\n      } else {\n        throw new Error(\"Expected a broadcast state function.\");\n      }\n    }\n\n    const historyInputs = new Map();\n    for (const [player, input] of initialInputs.entries()) {\n      historyInputs.set(player, { input, isPrediction: false });\n    }\n    this.history = [\n      new RollbackHistory(0, clone(this.state.serialize()), historyInputs),\n    ];\n\n    this.future = new Map();\n    this.highestFrameReceived = new Map();\n    for (const player of this.players) {\n      this.future.set(player, []);\n      this.highestFrameReceived.set(player, 0);\n    }\n  }\n\n  currentFrame(): number {\n    DEV && assert.isNotEmpty(this.history, `'history' cannot be empty.`);\n    return this.history[this.history.length - 1].frame;\n  }\n\n  largestFutureSize(): number {\n    return Math.max(...Array.from(this.future.values()).map((a) => a.length));\n  }\n\n  // Returns the number of frames for which at least one player's input is predicted.\n  predictedFrames(): number {\n    for (let i = 0; i < this.history.length; ++i) {\n      if (!this.history[i].allInputsSynced()) {\n        return this.history.length - i;\n      }\n    }\n    return 0;\n  }\n\n  // Whether or not we should stall.\n  shouldStall(): boolean {\n    // If we are predicting too many frames, then we have to stall.\n    return this.predictedFrames() > this.maxPredictedFrames;\n  }\n\n  tick() {\n    DEV && assert.isNotEmpty(this.history, `'history' cannot be empty.`);\n\n    // If we should stall, then don't peform a tick at all.\n    if (this.shouldStall()) return;\n\n    // Get the most recent state.\n    const lastState = this.history[this.history.length - 1];\n\n    // Construct the new map of inputs for this frame.\n    const newInputs: Map<\n      NetplayPlayer,\n      { input: TInput; isPrediction: boolean }\n    > = new Map();\n    for (const [player, input] of lastState.inputs.entries()) {\n      if (player.isLocalPlayer()) {\n        const localInput = this.pollInput();\n\n        // Local player gets the local input.\n        newInputs.set(player, { input: localInput, isPrediction: false });\n        // Broadcast the input to the other players.\n        this.broadcastInput(lastState.frame + 1, localInput);\n      } else {\n        if (get(this.future, player).length > 0) {\n          // If we have already recieved the player's input (due to our)\n          // simulation being behind, then use that input.\n          const future = shift(get(this.future, player));\n          DEV && assert.equal(lastState.frame + 1, future.frame);\n          newInputs.set(player, {\n            input: future.input,\n            isPrediction: false,\n          });\n        } else {\n          // Otherwise, set the next input based off of the previous input.\n          newInputs.set(player, {\n            input: input.input.predictNext(),\n            isPrediction: true,\n          });\n        }\n      }\n    }\n\n    // Tick our state with the new inputs, which may include predictions.\n    this.state.tick(this.getStateInputs(newInputs));\n\n    // Add a history entry into our rollback buffer.\n    this.history.push(\n      new RollbackHistory(\n        lastState.frame + 1,\n        clone(this.state.serialize()),\n        newInputs\n      )\n    );\n  }\n\n  /**\n   * Internally, we store inputs with a flag indicating whether or not that input is\n   * a prediction. Before sending that to the state, we need to remove the prediction\n   * flags, since the game logic doesn't care.\n   */\n  getStateInputs(\n    inputs: Map<NetplayPlayer, { input: TInput; isPrediction: boolean }>\n  ): Map<NetplayPlayer, TInput> {\n    const stateInputs: Map<NetplayPlayer, TInput> = new Map();\n    for (const [player, { input }] of inputs.entries()) {\n      stateInputs.set(player, input);\n    }\n    return stateInputs;\n  }\n\n  start() {\n    setInterval(() => {\n      // If us and our peer are running at the same simulation clock,\n      // we should expect inputs from our peer to arrive after we have\n      // simulated that state. If inputs from our peer are arriving before\n      // we simulate the state, that means we are running slow, and we\n      // have to tick faster. Otherwise we are needlessly forcing our\n      // peer to predict lots of frames.\n      let numTicks = 1;\n      if (this.largestFutureSize() > 0) {\n        numTicks = 2;\n      }\n\n      for (let i = 0; i < numTicks; ++i) {\n        this.tick();\n      }\n    }, this.timestep);\n  }\n}\n","import { JSONObject, JSONValue } from \"./json\";\n\nexport function serialize(data: any): JSONValue {\n  return JSON.parse(JSON.stringify(data)) as JSONValue;\n}\n\nexport function deserialize(source: JSONObject, dest: Record<string, any>): void {\n  // Deep copy hack.\n  const copy = JSON.parse(JSON.stringify(source));\n\n  // Copy values into source.\n  for (const [key, value] of Object.entries(copy)) {\n    dest[key] = copy[key];\n  }\n}\n","import * as autoserialize from \"./autoserialize\";\nimport { JSONObject, JSONValue } from \"./json\";\n\nexport abstract class NetplayState<TInput extends NetplayInput<TInput>> {\n  abstract tick(playerInputs: Map<NetplayPlayer, TInput>): void;\n\n  /**\n   * By default, use the auto serializer.\n   */\n  serialize(): JSONValue {\n    return autoserialize.serialize(this);\n  }\n\n  /**\n   * By default, use the auto deserializer.\n   */\n  deserialize(value: JSONValue): void {\n    autoserialize.deserialize(value as JSONObject, this);\n  }\n}\n\nexport abstract class NetplayInput<TInput extends NetplayInput<TInput>> {\n  /**\n   * By default, the prediction is to just use the same value.\n   */\n  predictNext(): TInput {\n    // @ts-ignore\n    return this;\n  }\n\n  /**\n   * By default, use the auto serializer.\n   */\n  serialize(): JSONValue {\n    return autoserialize.serialize(this);\n  }\n\n  /**\n   * By default, use the auto deserializer.\n   */\n  deserialize(value: JSONValue): void {\n    autoserialize.deserialize(value as JSONObject, this);\n  }\n}\n\nexport class NetplayPlayer {\n  id: number;\n  isLocal: boolean;\n  isHost: boolean;\n\n  constructor(id: number, isLocal: boolean, isHost: boolean) {\n    this.id = id;\n    this.isLocal = isLocal;\n    this.isHost = isHost;\n  }\n  isLocalPlayer(): boolean {\n    return this.isLocal;\n  }\n  isRemotePlayer(): boolean {\n    return !this.isLocal;\n  }\n  isServer(): boolean {\n    return this.isHost;\n  }\n  isClient(): boolean {\n    return !this.isHost;\n  }\n  getID(): number {\n    return this.id;\n  }\n}\n\nexport interface GameType<TState, TInput> {\n  /**\n   * Given a list of players, return the initial game state.\n   */\n  constructInitialState(players: Array<NetplayPlayer>): TState;\n\n  /**\n   * Construct a new input object with a default value. A new object\n   * needs to be constructed, since serialized values will be copied into this.\n   */\n  constructDefaultInput(): TInput;\n\n  /**\n   * The game simulation timestep, in milliseconds.\n   */\n  timestep: number;\n\n  // The dimensions of the rendering canvas.\n  canvasWidth: number;\n  canvasHeight: number;\n\n  draw(state: TState, canvas: HTMLCanvasElement, ctx: CanvasRenderingContext2D);\n\n  getInputReader(\n    document: HTMLDocument,\n    canvas: HTMLCanvasElement\n  ): () => TInput;\n}\n","export function get<K, V>(map: Map<K, V>, key: K): V {\n  const result = map.get(key);\n  if (result !== undefined) {\n    return result;\n  }\n  throw new Error(`Key ${String(key)} not in Map ${map.toString()}`);\n}\n\nexport function clone(object: any): any {\n  return JSON.parse(JSON.stringify(object));\n}\n\nexport function shift<V>(array: Array<V>): V {\n  const result = array.shift();\n  if (result !== undefined) {\n    return result;\n  }\n  throw new Error(`Shift returned undefined from Array ${array.toString()}`);\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('main-layout')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"main-layout\"},[_c('aspect-ratio-letterbox',[_c('game-canvas')],1),(this.shouldShowNetplayMenu)?_c('netplay-menu'):_vm._e(),(this.shouldShowNetplayStats)?_c('netplay-stats'):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"aspectRatioWrapper\",class:this.shouldUseHorizontalLetterbox ? 'aspect-ratio-wrapper-h' : 'aspect-ratio-wrapper-v'},[_c('div',{class:this.shouldUseHorizontalLetterbox ? 'aspect-ratio-div-h' : 'aspect-ratio-div-v'},[_c('div',{staticClass:\"content-wrapper\"},[_vm._t(\"default\")],2)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\n\n// forces 16:9. Not using consts for 16:9 because css is involved \n\nexport default Vue.extend({\n  name: \"AspectRatioLetterbox\",\n  data: function() {\n    return {\n      shouldUseHorizontalLetterbox: true\n    }\n  },\n\tmethods: {\n\t\tdetectWidth() {\n\t\t\tconst aspectRatioWrapperElement = this.$refs.aspectRatioWrapper as Element;\n      const contentWrapperAspectRatio = aspectRatioWrapperElement.clientWidth / aspectRatioWrapperElement.clientHeight\n\t\t\tthis.shouldUseHorizontalLetterbox = contentWrapperAspectRatio >= (16 / 9);\n\t\t}\n\t},\n\tmounted() {\n\t\tthis.detectWidth();\n\t\twindow.onresize = this.detectWidth.bind(this);\n\t}\n});\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-41[0].rules[0].use[2]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AspectRatioLetterbox.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-41[0].rules[0].use[2]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AspectRatioLetterbox.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./AspectRatioLetterbox.vue?vue&type=template&id=f8cb903a&scoped=true&\"\nimport script from \"./AspectRatioLetterbox.vue?vue&type=script&lang=ts&\"\nexport * from \"./AspectRatioLetterbox.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./AspectRatioLetterbox.vue?vue&type=style&index=0&id=f8cb903a&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f8cb903a\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"canvas-wrapper\"},[_c('canvas-overlay',{staticClass:\"canvas-overlay-from-parent\"}),_vm._m(0)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('canvas',{attrs:{\"id\":\"game-canvas\"}})}]\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"canvas-overlay\"},[_c('hud-section',{staticClass:\"hud-section-from-parent\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"hud-section\"},_vm._l((_vm.players),function(player){return _c('player-meter',{key:player.index,attrs:{\"playerIndex\":player.index}})}),1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"player-meter-wrapper\"},[_c('div',{staticClass:\"player-meter\"},[_c('div',{staticClass:\"meter-bg\"},[_c('div',{staticClass:\"meter-fg\",style:(_vm.injectBarWidthStyle())})])]),_c('div',{staticClass:\"amount-text\"},[_vm._v(\" \"+_vm._s(_vm.displayNumber)+\" \")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-41[0].rules[0].use[2]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PlayerMeter.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-41[0].rules[0].use[2]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PlayerMeter.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./PlayerMeter.vue?vue&type=template&id=1fa2f416&scoped=true&\"\nimport script from \"./PlayerMeter.vue?vue&type=script&lang=ts&\"\nexport * from \"./PlayerMeter.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./PlayerMeter.vue?vue&type=style&index=0&id=1fa2f416&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1fa2f416\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-41[0].rules[0].use[2]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./HudSection.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-41[0].rules[0].use[2]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./HudSection.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./HudSection.vue?vue&type=template&id=0c1a4603&scoped=true&\"\nimport script from \"./HudSection.vue?vue&type=script&lang=ts&\"\nexport * from \"./HudSection.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./HudSection.vue?vue&type=style&index=0&id=0c1a4603&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0c1a4603\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-41[0].rules[0].use[2]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CanvasOverlay.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-41[0].rules[0].use[2]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CanvasOverlay.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./CanvasOverlay.vue?vue&type=template&id=4e4af283&scoped=true&\"\nimport script from \"./CanvasOverlay.vue?vue&type=script&lang=ts&\"\nexport * from \"./CanvasOverlay.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./CanvasOverlay.vue?vue&type=style&index=0&id=4e4af283&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4e4af283\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-41[0].rules[0].use[2]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./GameCanvas.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-41[0].rules[0].use[2]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./GameCanvas.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./GameCanvas.vue?vue&type=template&id=5f898446&scoped=true&\"\nimport script from \"./GameCanvas.vue?vue&type=script&lang=ts&\"\nexport * from \"./GameCanvas.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./GameCanvas.vue?vue&type=style&index=0&id=5f898446&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5f898446\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"netplay-menu-wrapper\"},[_c('card-box',[_c('div',{staticClass:\"netplay-menu-column\"},[_c('button',{on:{\"click\":_vm.copyToClipboard}},[_vm._v(\" Copy Player 2 Link to Clipboard \")]),_c('a',{attrs:{\"href\":this.vueService.state.netplay.joinUrl,\"target\":\"_blank\"}},[_vm._v(\" Open Player 2 Tab \")])])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"card\"},[_vm._t(\"default\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-41[0].rules[0].use[2]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CardBox.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-41[0].rules[0].use[2]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CardBox.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./CardBox.vue?vue&type=template&id=2d925e7c&scoped=true&\"\nimport script from \"./CardBox.vue?vue&type=script&lang=ts&\"\nexport * from \"./CardBox.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./CardBox.vue?vue&type=style&index=0&id=2d925e7c&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2d925e7c\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-41[0].rules[0].use[2]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./NetplayMenu.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-41[0].rules[0].use[2]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./NetplayMenu.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./NetplayMenu.vue?vue&type=template&id=323814d5&scoped=true&\"\nimport script from \"./NetplayMenu.vue?vue&type=script&lang=ts&\"\nexport * from \"./NetplayMenu.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./NetplayMenu.vue?vue&type=style&index=0&id=323814d5&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"323814d5\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"netplay-stats-wrapper\"},[_c('card-box',[_c('table',{staticClass:\"netplay-stats-table\"},[(!!this.vueService.state.netplay.errorMessage)?_c('span',[_vm._v(\" \"+_vm._s(this.vueService.state.netplay.errorMessage)+\" \")]):_vm._e(),_c('tr',[_c('td',[_vm._v(\"Ping\")]),_c('td',[_vm._v(_vm._s(this.ping))])]),_c('tr',[_c('td',[_vm._v(\"History Length\")]),_c('td',[_vm._v(_vm._s(this.vueService.state.netplay.historyLength))])]),_c('tr',[_c('td',[_vm._v(\"Frame\")]),_c('td',[_vm._v(_vm._s(this.vueService.state.netplay.frame))])]),_c('tr',[_c('td',[_vm._v(\"Largest Future Size\")]),_c('td',[_vm._v(_vm._s(this.vueService.state.netplay.largestFutureSize))])]),_c('tr',[_c('td',[_vm._v(\"Predicted Frames\")]),_c('td',[_vm._v(_vm._s(this.vueService.state.netplay.predictedFrames))])]),_c('tr',[_c('td',[_vm._v(\"Stalling\")]),_c('td',[_vm._v(_vm._s(this.vueService.state.netplay.stalling))])])])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-41[0].rules[0].use[2]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./NetplayStats.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-41[0].rules[0].use[2]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./NetplayStats.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./NetplayStats.vue?vue&type=template&id=64f04334&scoped=true&\"\nimport script from \"./NetplayStats.vue?vue&type=script&lang=ts&\"\nexport * from \"./NetplayStats.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./NetplayStats.vue?vue&type=style&index=0&id=64f04334&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"64f04334\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-41[0].rules[0].use[2]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MainLayout.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-41[0].rules[0].use[2]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MainLayout.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./MainLayout.vue?vue&type=template&id=c2b29102&scoped=true&\"\nimport script from \"./MainLayout.vue?vue&type=script&lang=ts&\"\nexport * from \"./MainLayout.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./MainLayout.vue?vue&type=style&index=0&id=c2b29102&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c2b29102\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41[0].rules[0].use[2]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41[0].rules[0].use[2]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=21d134e4&\"\nimport script from \"./App.vue?vue&type=script&lang=ts&\"\nexport * from \"./App.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from \"vue\";\nimport App from \"./Vue/App.vue\";\n\nVue.config.productionTip = false;\n\nnew Vue({\n  render: h => h(App)\n}).$mount(\"#app\");\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var webpackThen = typeof Symbol === \"function\" ? Symbol(\"webpack then\") : \"__webpack_then__\";\nvar webpackExports = typeof Symbol === \"function\" ? Symbol(\"webpack exports\") : \"__webpack_exports__\";\nvar webpackError = typeof Symbol === \"function\" ? Symbol(\"webpack error\") : \"__webpack_error__\";\nvar completeQueue = function(queue) {\n\tif(queue) {\n\t\tqueue.forEach(function(fn) { fn.r--; });\n\t\tqueue.forEach(function(fn) { fn.r-- ? fn.r++ : fn(); });\n\t}\n}\nvar completeFunction = function(fn) { !--fn.r && fn(); };\nvar queueFunction = function(queue, fn) { queue ? queue.push(fn) : completeFunction(fn); };\nvar wrapDeps = function(deps) { return deps.map(function(dep) {\n\tif(dep !== null && typeof dep === \"object\") {\n\t\tif(dep[webpackThen]) return dep;\n\t\tif(dep.then) {\n\t\t\tvar queue = [];\n\t\t\tdep.then(function(r) {\n\t\t\t\tobj[webpackExports] = r;\n\t\t\t\tcompleteQueue(queue);\n\t\t\t\tqueue = 0;\n\t\t\t}, function(e) {\n\t\t\t\tobj[webpackError] = e;\n\t\t\t\tcompleteQueue(queue);\n\t\t\t\tqueue = 0;\n\t\t\t});\n\t\t\tvar obj = {};\n\t\t\tobj[webpackThen] = function(fn, reject) { queueFunction(queue, fn), dep['catch'](reject); };\n\t\t\treturn obj;\n\t\t}\n\t}\n\tvar ret = {};\n\tret[webpackThen] = function(fn) { completeFunction(fn); };\n\tret[webpackExports] = dep;\n\treturn ret;\n}); };\n__webpack_require__.a = function(module, body, hasAwait) {\n\tvar queue = hasAwait && [];\n\tvar exports = module.exports;\n\tvar currentDeps;\n\tvar outerResolve;\n\tvar reject;\n\tvar isEvaluating = true;\n\tvar nested = false;\n\tvar whenAll = function(deps, onResolve, onReject) {\n\t\tif (nested) return;\n\t\tnested = true;\n\t\tonResolve.r += deps.length;\n\t\tdeps.map(function(dep, i) { dep[webpackThen](onResolve, onReject); });\n\t\tnested = false;\n\t};\n\tvar promise = new Promise(function(resolve, rej) {\n\t\treject = rej;\n\t\touterResolve = function() { resolve(exports), completeQueue(queue), queue = 0; };\n\t});\n\tpromise[webpackExports] = exports;\n\tpromise[webpackThen] = function(fn, rejectFn) {\n\t\tif (isEvaluating) { return completeFunction(fn); }\n\t\tif (currentDeps) whenAll(currentDeps, fn, rejectFn);\n\t\tqueueFunction(queue, fn);\n\t\tpromise['catch'](rejectFn);\n\t};\n\tmodule.exports = promise;\n\tbody(function(deps) {\n\t\tcurrentDeps = wrapDeps(deps);\n\t\tvar fn;\n\t\tvar getResult = function() { return currentDeps.map(function(d) {\n\t\t\tif(d[webpackError]) throw d[webpackError];\n\t\t\treturn d[webpackExports];\n\t\t}); }\n\t\tvar promise = new Promise(function(resolve, reject) {\n\t\t\tfn = function() { resolve(getResult); };\n\t\t\tfn.r = 0;\n\t\t\twhenAll(currentDeps, fn, reject);\n\t\t});\n\t\treturn fn.r ? promise : getResult();\n\t}, function(err) { err && reject(promise[webpackError] = err), outerResolve(); });\n\tisEvaluating = false;\n};","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.hmd = function(module) {\n\tmodule = Object.create(module);\n\tif (!module.children) module.children = [];\n\tObject.defineProperty(module, 'exports', {\n\t\tenumerable: true,\n\t\tset: function() {\n\t\t\tthrow new Error('ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: ' + module.id);\n\t\t}\n\t});\n\treturn module;\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.v = function(exports, wasmModuleId, wasmModuleHash, importsObj) {\n\tvar req = fetch(__webpack_require__.p + \"\" + wasmModuleHash + \".module.wasm\");\n\tif (typeof WebAssembly.instantiateStreaming === 'function') {\n\t\treturn WebAssembly.instantiateStreaming(req, importsObj)\n\t\t\t.then(function(res) { return Object.assign(exports, res.instance.exports); });\n\t}\n\treturn req\n\t\t.then(function(x) { return x.arrayBuffer(); })\n\t\t.then(function(bytes) { return WebAssembly.instantiate(bytes, importsObj); })\n\t\t.then(function(res) { return Object.assign(exports, res.instance.exports); });\n};","__webpack_require__.p = \"\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkgame\"] = self[\"webpackChunkgame\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(1851); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","id","module","exports","GameObject","Ball","props","scene","colliderHandle","createCollider","rigidBodyDesc","RigidBodyDesc","rigidBody","this","world","createRigidBody","colliderDesc","ColliderDesc","r","setTranslation","x","y","returnCollider","handle","canvas","c","getContext","fillStyle","collider","getCollider","translation","xPosition","yPosition","radius","beginPath","arc","Math","PI","fill","PulsePlayerObject","xAxisInput","yAxisInput","ACCELERATION_CONSTANT_X","ACCELERATION_CONSTANT_Y","getRigidBody","parent","velocity","linvel","xInputForce","yInputForce","impulseX","mass","impulseY","impulse","applyImpulse","Bezier","Wall","groundColliderDesc","w","h","setRotation","rotation","returnColliderHandle","console","log","halfExtents","halfX","halfY","rect","gamepadNoInputResult","button1","button2","button3","button4","leftStickXAxis","leftStickYAxis","rightStickXAxis","rightStickYAxis","leftTriggerAxis","rightTriggerAxis","InputServiceImplementation","input","gamepadIndex","config","gamepad","gamepads","mapping","gamepadInputMapping","leftStickMagnitude","sqrt","pow","abs","axes","leftStickXAxisIndex","leftStickYAxisIndex","rightStickMagnitude","rightStickXAxisIndex","rightStickYAxisIndex","isLeftStickDeadzoned","leftStickDeadzone","isRightStickDeadzoned","rightStickDeadzone","detectedInput","buttons","button1Index","pressed","button2Index","button3Index","button4Index","leftTriggerAxisIndex","rightTriggerAxisIndex","keyboardMouseInputMapping","button1Key","button2Key","button3Key","button4Key","buttonUp","buttonUpKey","buttonRight","buttonRightKey","buttonDown","buttonDownKey","buttonLeft","buttonLeftKey","InputService","Player","playerIndex","netplayPlayerIndex","inputConfig","resourceMeter","RESOURCE_METER_BEGIN","getKeyboardMouseInput","defaultInputConfig","getGamepadInput","value","newValue","min","RESOURCE_METER_MAXIMUM","VueService","PulsePlayer","RADIUS","pulseObject","undefined","addGameObject","handleMovement","getInput","isGamePadInputResult","Scene","unitWidth","unitHeight","gameObjects","setup","canvasElementWidth","getBoundingClientRect","width","canvasElementHeight","height","transform","xScaling","yScaling","squareScaling","scale","renderBackground","renderGameObjects","newObject","push","forEach","gameObject","render","fillRect","SCENE_WIDTH","SCENE_HEIGHT","UI_HEIGHT","NON_UI_HEIGHT","ARENA_WIDTH","ARENA_HEIGHT","ARENA_HORIZONTAL_PADDING","ARENA_VERTICAL_PADDING","WALL_THICKNESS","createScene1","gravity","World","returnScene","player1","players","createObjects","player2","MyGame","snapshot","takeSnapshot","toString","splitSnapshot","split","array","Uint8Array","playerInputs","tickWorld","tickPlayers","colliders","forEachCollider","player","entries","netplayPlayer","getID","tick","step","Game","MyRollbackWrapper","start","MyInput","DefaultInput","MyInputReader","key","PRESSED_KEYS","navigator","getGamepads","DefaultInputReader","PING_INTERVAL","gameClass","EWMASD","stateSyncPeriod","document","getElementById","touchControls","window","userAgent","toLowerCase","includes","Object","control","show","inputReader","pointerLock","channel","ordered","maxPacketLifeTime","maxRetransmits","assert","isChannelOrdered","isChannelReliable","info","vueService","setNetplayConnectingToServer","peer","Peer","on","err","setNetplayErrorMessage","JSON","stringify","error","parsedHash","query","location","hash","isClient","room","setNetplayConnectedToPeer","conn","connect","serialization","reliable","_payload","originator","NetplayPlayer","startClient","joinURL","href","setNetplayJoinUrl","startHost","initialInputs","Map","set","game","rollbackNetcode","RollbackNetcode","getInitialInputs","pingMeasure","timestep","frame","send","type","serialize","state","data","deserialize","onRemoteInput","sent_time","update","Date","now","checkChannel","dataChannel","setInterval","startGameLoop","onStateSync","animate","timestamp","draw","setNetplayPing","average","toFixed","setNetplayPingStdDev","stddev","setNetplayHistoryLength","history","length","setNetplayFrame","currentFrame","setNetplayLargestFutureSize","largestFutureSize","setNetplayPredictedFrames","predictedFrames","setNetplayStalling","shouldStall","requestAnimationFrame","defaultXboxOneInputMapping","defaultKeyboardMouseInputMapping","VueServiceImplementation","netplay","connectingToServer","connectedToPeer","joinUrl","errorMessage","ping","pingStdDev","historyLength","stalling","playerDict","playerState","Vue","index","placeholderSetting","NetplayInput","addEventListener","event","updateMousePosition","mousePosition","updateTouches","requestPointerLock","clientX","clientY","getCanvasScale","left","top","pointerLockElement","movementX","movementY","projectClientPosition","touches","targetTouches","i","utils","name","getValue","discount","est_average","est_variance","initialized","measurement","delta","NetplayState","DEV","process","RollbackHistory","inputs","get","isPrediction","anyInputPredicted","isHost","initialState","maxPredictedFrames","pollInput","broadcastInput","broadcastState","historyInputs","clone","future","highestFrameReceived","cleanedUpStates","allInputsSynced","shift","debug","currentState","getStateInputs","isRemotePlayer","expectedFrame","firstPrediction","isPlayerInputPredicted","lastActualState","currentPlayerInput","previousState","previousPlayerInput","predictNext","firstState","nextState","syncedState","max","Array","from","values","map","a","lastState","newInputs","isLocalPlayer","localInput","stateInputs","numTicks","parse","source","dest","copy","autoserialize","isLocal","result","String","object","_vm","_h","$createElement","_c","_self","attrs","staticRenderFns","staticClass","_e","ref","class","shouldUseHorizontalLetterbox","_t","methods","detectWidth","aspectRatioWrapperElement","$refs","aspectRatioWrapper","contentWrapperAspectRatio","clientWidth","clientHeight","mounted","onresize","bind","component","_m","_l","style","injectBarWidthStyle","_v","_s","displayNumber","Number","computed","floor","components","PlayerMeter","HudSection","CanvasOverlay","copyToClipboard","CardBox","clipboard","writeText","AspectRatioLetterbox","NetplayMenu","NetplayStats","GameCanvas","shouldShowNetplayMenu","shouldShowNetplayStats","MainLayout","require","App","$mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","loaded","__webpack_modules__","call","m","webpackThen","Symbol","webpackExports","webpackError","completeQueue","queue","fn","completeFunction","queueFunction","wrapDeps","deps","dep","then","obj","reject","ret","body","hasAwait","currentDeps","outerResolve","isEvaluating","nested","whenAll","onResolve","onReject","promise","Promise","rej","rejectFn","getResult","d","deferred","O","chunkIds","priority","notFulfilled","Infinity","fulfilled","j","every","splice","n","getter","__esModule","definition","o","defineProperty","enumerable","g","globalThis","Function","hmd","create","children","prop","prototype","hasOwnProperty","toStringTag","v","wasmModuleId","wasmModuleHash","importsObj","fetch","p","WebAssembly","instantiateStreaming","res","assign","instance","arrayBuffer","bytes","instantiate","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","__webpack_exports__"],"sourceRoot":""}